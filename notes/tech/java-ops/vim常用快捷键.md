# Vim 常用快捷键指南

## 概述

Vim 是一个强大的文本编辑器，掌握快捷键是提高效率的关键。本文档按功能分类整理了最常用的 Vim 快捷键。

---

## 1. 模式切换

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Esc` | 切换到普通模式 | 从任何模式返回普通模式 |
| `i` | 进入插入模式 | 在光标前插入 |
| `a` | 进入插入模式 | 在光标后插入 |
| `o` | 进入插入模式 | 在下一行插入新行 |
| `O` | 进入插入模式 | 在上一行插入新行 |
| `s` | 进入插入模式 | 删除当前字符并插入 |
| `S` | 进入插入模式 | 删除当前行并插入 |
| `v` | 进入可视模式 | 字符选择 |
| `V` | 进入可视模式 | 行选择 |
| `Ctrl + v` | 进入可视模式 | 块选择 |
| `:` | 进入命令模式 | 执行命令 |

---

## 2. 光标移动

### 基本移动

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `h` | 左移 | 左移一个字符 |
| `j` | 下移 | 下移一行 |
| `k` | 上移 | 上移一行 |
| `l` | 右移 | 右移一个字符 |
| `w` | 下一个词 | 移动到下一个单词开头 |
| `b` | 上一个词 | 移动到上一个单词开头 |
| `e` | 词尾 | 移动到当前单词结尾 |
| `0` | 行首 | 移动到行首 |
| `^` | 首个非空字符 | 移动到行首第一个非空字符 |
| `$` | 行尾 | 移动到行尾 |

### 快速移动

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `gg` | 文件开头 | 移动到文件第一行 |
| `G` | 文件结尾 | 移动到文件最后一行 |
| `:n` | 第 n 行 | 移动到第 n 行 |
| `Ctrl + f` | 下一页 | 向下翻一页 |
| `Ctrl + b` | 上一页 | 向上翻一页 |
| `Ctrl + d` | 下半页 | 向下翻半页 |
| `Ctrl + u` | 上半页 | 向上翻半页 |
| `H` | 屏幕顶部 | 移动到屏幕顶部 |
| `M` | 屏幕中间 | 移动到屏幕中间 |
| `L` | 屏幕底部 | 移动到屏幕底部 |

---

## 3. 编辑操作

### 删除操作

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `x` | 删除字符 | 删除光标处字符 |
| `X` | 删除字符 | 删除光标前字符 |
| `dd` | 删除行 | 删除当前行 |
| `dw` | 删除单词 | 删除到下一个单词 |
| `d0` | 删除到行首 | 删除到行首 |
| `d$` | 删除到行尾 | 删除到行尾 |
| `D` | 删除到行尾 | 删除到行尾（同 d$） |
| `:n,md` | 删除范围 | 删除第 n 到 m 行 |

### 复制粘贴

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `yy` | 复制行 | 复制当前行 |
| `yw` | 复制单词 | 复制当前单词 |
| `y0` | 复制到行首 | 复制到行首 |
| `y$` | 复制到行尾 | 复制到行尾 |
| `p` | 粘贴 | 在光标后粘贴 |
| `P` | 粘贴 | 在光标前粘贴 |
| `"ay` | 复制到寄存器 a | 复制到命名寄存器 |
| `"ap` | 从寄存器 a 粘贴 | 从命名寄存器粘贴 |

### 撤销重做

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `u` | 撤销 | 撤销上一步操作 |
| `Ctrl + r` | 重做 | 重做被撤销的操作 |
| `.` | 重复 | 重复上一次修改操作 |

---

## 4. 查找替换

### 查找

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `/pattern` | 向下查找 | 查找 pattern |
| `?pattern` | 向上查找 | 向上查找 pattern |
| `n` | 下一个匹配 | 查找下一个匹配项 |
| `N` | 上一个匹配 | 查找上一个匹配项 |
| `*` | 查找当前词 | 向下查找当前单词 |
| `#` | 查找当前词 | 向上查找当前单词 |
| `:%s/old/new/g` | 全局替换 | 替换文件中所有匹配项 |
| `:%s/old/new/gc` | 确认替换 | 逐个确认替换 |

---

## 5. 文件操作

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `:w` | 保存 | 保存文件 |
| `:w filename` | 另存为 | 保存到指定文件 |
| `:q` | 退出 | 退出 Vim |
| `:wq` | 保存并退出 | 保存后退出 |
| `:q!` | 强制退出 | 不保存强制退出 |
| `:e filename` | 打开文件 | 打开新文件 |
| `:r filename` | 读取文件 | 在当前位置插入文件内容 |
| `:n` | 下一个文件 | 编辑下一个文件 |
| `:N` | 上一个文件 | 编辑上一个文件 |

---

## 6. 窗口操作

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `:sp` | 水平分割 | 水平分割窗口 |
| `:vsp` | 垂直分割 | 垂直分割窗口 |
| `Ctrl + w + h` | 切换窗口 | 切换到左窗口 |
| `Ctrl + w + j` | 切换窗口 | 切换到下窗口 |
| `Ctrl + w + k` | 切换窗口 | 切换到上窗口 |
| `Ctrl + w + l` | 切换窗口 | 切换到右窗口 |
| `Ctrl + w + q` | 关闭窗口 | 关闭当前窗口 |
| `Ctrl + w + =` | 均分窗口 | 均分窗口大小 |

---

## 7. 文本对象

### 字符对象

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `ci"` | 改变引号内 | 删除引号内内容并进入插入模式 |
| `di"` | 删除引号内 | 删除引号内内容 |
| `yi"` | 复制引号内 | 复制引号内内容 |
| `ca"` | 改变引号及内容 | 删除引号及内容并插入 |

### 其他对象

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `ciw` | 改变单词 | 删除当前单词并插入 |
| `diw` | 删除单词 | 删除当前单词 |
| `yiw` | 复制单词 | 复制当前单词 |
| `caw` | 改变单词及空格 | 删除单词及空格并插入 |
| `cit` | 改变标签内 | 删除 HTML/XML 标签内内容 |
| `dit` | 删除标签内 | 删除 HTML/XML 标签内内容 |

---

## 8. 宏操作

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `qa` | 开始录制宏 | 开始录制宏到寄存器 a |
| `q` | 结束录制 | 结束宏录制 |
| `@a` | 执行宏 | 执行寄存器 a 中的宏 |
| `@@` | 重复执行宏 | 重复执行上一次宏 |
| `10@a` | 重复执行 | 执行宏 10 次 |

---

## 9. 高级操作

### 缩进

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `>>` | 增加缩进 | 当前行增加缩进 |
| `<<` | 减少缩进 | 当前行减少缩进 |
| `=G` | 自动缩进 | 从当前位置到文件结尾自动缩进 |
| `gg=G` | 全文件缩进 | 整个文件自动缩进 |

### 大小写转换

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `~` | 切换大小写 | 切换当前字符大小写 |
| `gU` | 转大写 | 转换为大写 |
| `gu` | 转小写 | 转换为小写 |
| `gUU` | 行转大写 | 当前行转大写 |
| `guu` | 行转小写 | 当前行转小写 |

### 折叠

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `zf` | 创建折叠 | 创建折叠 |
| `zo` | 打开折叠 | 打开折叠 |
| `zc` | 关闭折叠 | 关闭折叠 |
| `za` | 切换折叠 | 切换折叠状态 |
| `zR` | 打开所有折叠 | 打开所有折叠 |
| `zM` | 关闭所有折叠 | 关闭所有折叠 |

---

## 10. 搜索高亮

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `:set hlsearch` | 开启高亮 | 开启搜索高亮 |
| `:set nohlsearch` | 关闭高亮 | 关闭搜索高亮 |
| `:nohlsearch` | 临时关闭 | 临时关闭当前高亮 |
| `:set incsearch` | 增量搜索 | 输入时实时搜索 |
| `:set ignorecase` | 忽略大小写 | 搜索时忽略大小写 |
| `:set smartcase` | 智能大小写 | 智能处理大小写 |

---

## 11. 命令模式常用命令

### 行号相关

| 命令 | 功能 | 说明 |
|------|------|------|
| `:set number` | 显示行号 | 显示行号 |
| `:set nonumber` | 隐藏行号 | 隐藏行号 |
| `:set relativenumber` | 相对行号 | 显示相对行号 |

### 文件信息

| 命令 | 功能 | 说明 |
|------|------|------|
| `:!command` | 执行命令 | 执行 shell 命令 |
| `:r !command` | 插入命令输出 | 插入 shell 命令输出 |
| `:pwd` | 显示当前目录 | 显示当前工作目录 |
| `:ls` | 列出缓冲区 | 列出所有缓冲区 |

---

## 12. 实用技巧

### 快速跳转

| 技巧 | 说明 |
|------|------|
| `Ctrl + i` | 跳转到跳转列表的下一个位置 |
| `Ctrl + o` | 跳转到跳转列表的上一个位置 |
| `''` | 跳转到上次的位置 |
| `'.` | 跳转到上次修改的位置 |
| `g;` | 跳转到上一次编辑的位置 |
| `g,` | 跳转到下一次编辑的位置 |

### 书签操作

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `ma` | 设置书签 a | 在当前位置设置书签 a |
| `'a` | 跳转到书签 a | 跳转到书签 a 的行首 |
| `\`a` | 跳转到书签 a | 跳转到书签 a 的精确位置 |

---

## 13. 配置建议

### 基础配置

```vim
" 显示行号
set number
" 显示相对行号
set relativenumber
" 高亮搜索
set hlsearch
" 增量搜索
set incsearch
" 智能缩进
set smartindent
" 显示匹配的括号
set showmatch
" 语法高亮
syntax on
" 设置制表符宽度
set tabstop=4
set shiftwidth=4
set expandtab
```

---

## 14. 学习路径建议

### 初学者（1-2周）

1. **模式切换**：掌握 `i`, `Esc`, `:`
2. **基本移动**：`h`, `j`, `k`, `l`, `w`, `b`, `0`, `$`
3. **基本编辑**：`x`, `dd`, `yy`, `p`, `P`, `u`
4. **保存退出**：`:w`, `:q`, `:wq`

### 进阶用户（1-2月）

1. **高效移动**：`gg`, `G`, `Ctrl + f/b`, `H/M/L`
2. **文本对象**：`ci"`, `di"`, `ciw`, `dit`
3. **搜索替换**：`/`, `n`, `:%s/old/new/g`
4. **窗口操作**：`:sp`, `:vsp`, `Ctrl + w`

### 高级用户（3月+）

1. **宏操作**：录制和执行宏
2. **高级文本对象**：复杂文本操作
3. **插件配置**：安装和配置插件
4. **自定义配置**：个性化 `.vimrc`

---

## 15. 常见问题解决

| 问题 | 解决方案 |
|------|----------|
| 无法退出 | 输入 `:q!` 强制退出 |
| 搜索高亮太多 | 输入 `:nohlsearch` 清除高亮 |
| 缩进混乱 | 使用 `gg=G` 全文件格式化 |
| 意外修改 | 使用 `u` 撤销操作 |
| 粘贴格式错乱 | 使用 `:set paste` 后再粘贴 |

---

## 总结

Vim 的学习曲线较陡，但掌握后效率极高：

- **先掌握基础**：模式切换、基本移动、简单编辑
- **逐步进阶**：文本对象、窗口操作、宏
- **持续练习**：每天使用，形成肌肉记忆
- **个性化配置**：根据需求调整 `.vimrc`

记住：**Vim 的核心理念是"模式编辑"，不同模式有不同的功能。**

---

**提示**：将此文档保存为书签，随时查阅。多练习，熟能生巧！
